# 取出日期时转换成指定格式

```sql
select username, date_format(start_time, ‘%Y-%m-%d %H:%i:%s’) from user # 2019-01-14 13:45:00
select username, date_format(start_time, ‘%Y-%m-%d’) from user # 2019-01-14
```

但是这样取出日期就是字符串了，需要数据校验，存进对象时进行转换



# 存储的格式是YY-mm-dd类型时查询：

假如表product有字段add_time,它的数据类型为datetime,写sql如下：

```mysql
select * from product where add_time = '2019-01-12'
```

对于这种语句，适合存储的格式是YY-mm-dd类型的；

## 1.Date()函数处理字段作为日期查询条件:

如果你存储的格式是YY-mm-dd H:i:s (2019-01-12 23:23:56)这种格式可以使用DATE()函数用来返回日期条件查询的部分，如下处理：

```mysql
select * from product where Date(add_time) = '2019-01-12'
```



## 2.timestamp()函数来查询：

如果按照日期+时间模式（2019-01-12 23:23:56—时间精确到秒）查询数据库，则可以使用timestamp()函数来查询：

```mysql
select * from product where timestamp(add_time) = '2019-01-12 23:23:56'； 
```

或者查询一个时间范围，可以用：

```mysql
select * from product where timestamp(add_time) between '2019-01-12 03:23:56' and '2019-01-12 23:23:56'；
```



## 3.查询指定月份的数据记录：

如果你要查询2013年1月份加入的产品：

```mysql
select * from product where date(add_time) between '2019-01-01' and '2019-01-31'
你还可以这样写：select * from product where Year(add_time) = 2019 and Month(add_time) = 1
```



## 4.查询与现在距离一定时间范围内的数据记录：

### TO_DAYS()

如果你要查询最后30天以内的数据，用TO_DAYS()函数转换时间字段进行比较：

```mysql
mysql> SELECT something FROM table  WHERE TO_DAYS(NOW()) - TO_DAYS(date_col) <= 30;
```

###  

###   DAYOFWEEK(date) 

   返回日期date的星期索引(1=星期天，2=星期一, ……7=星期六)。这些索引值对应于ODBC标准。

```mysql
mysql> select DAYOFWEEK('1998-02-03');  -> 3
```



###    WEEKDAY(date) 

   返回date的星期索引(0=星期一，1=星期二, ……6= 星期天)。

```mysql
mysql> select WEEKDAY('1997-10-04 22:23:00');  -> 5  mysql> select WEEKDAY('1997-11-05');  -> 2
```



###    DAYOFMONTH(date) 

   返回date的月份中日期，在1到31范围内。

```mysql
mysql> select DAYOFMONTH('1998-02-03');  -> 3
```



###    DAYOFYEAR(date) 

   返回date在一年中的日数, 在1到366范围内。

```mysql
mysql> select DAYOFYEAR('1998-02-03');  -> 34
```



###    MONTH(date) 

   返回date的月份，范围1到12。

```mysql
mysql> select MONTH('1998-02-03');  -> 2
```



###    DAYNAME(date) 

   返回date的星期名字。

```mysql
mysql> select DAYNAME("1998-02-05");  -> 'Thursday'
```



###    MONTHNAME(date) 

   返回date的月份名字。

```mysql
mysql> select MONTHNAME("1998-02-05");  -> 'February'
```



###    QUARTER(date) 

   返回date一年中的季度，范围1到4。

```mysql
mysql> select QUARTER('98-04-01');  -> 2
```

