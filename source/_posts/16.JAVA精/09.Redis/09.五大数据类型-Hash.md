#### Hash（哈希）

- Redis hash 是一个**string类型**的字段（field）和值（value）的映射表（key），hash特别适合用于**存储对象**。

- Set就是一种简化的Hash,只变动key,而value使用默认值填充。可以将一个Hash表作为一个对象进行存储，表中存放对象的信息。

  |                        命令                        |                             描述                             |                      追加描述                       |
  | :------------------------------------------------: | :----------------------------------------------------------: | :-------------------------------------------------: |
  |              **HSet key field value**              | 将哈希表 key 中的字段 field 的值**设置**为 value 。重复设置同一个field会**覆盖**,返回0 |                                                     |
  |   **HMSet key field1 value1 [field2 value2..]**    | 同时将**多个** field-value (字段-值)对**设置**到哈希表 key 中。 |                                                     |
  |             **HSetNX key field value**             |   只有在字段 field **不存在时**，**设置**哈希表字段的值。    |                                                     |
  |                **HExist key field**                |         查看哈希表 key 中，指定的字段**是否存在**。          |                                                     |
  |              **HGet key field value**              |              **获取**存储在哈希表中指定字段的值              |                                                     |
  |          **HMGet key field1 [field2..]**           |                   **批量获取**给定字段的值                   |                                                     |
  |                  **HGetAll key**                   |              获取在哈希表key 的**所有字段和值**              |                                                     |
  |                   **HKeys key**                    |                获取哈希表key中**所有的字段**                 |                                                     |
  |                    **HLen key**                    |                  获取哈希表中**字段的数量**                  |                                                     |
  |                   **HVals key**                    |                    获取哈希表中**所有值**                    |                                                     |
  |           **HDel key field1 [field2..]**           |              删除哈希表key中一个/多个field字段               |                                                     |
  |              **HIncrBy key field n**               | 为哈希表 key 中的指定字段的整数值**加**n，并返回增量后结果（只适用于整数型字段） |                   没有HDECRBY命令                   |
  |            **HIncrByFloat key field n**            | 为哈希表 key 中的指定字段的**加浮点数值**n（只适用于数字字段） | HINCRBYFLOAT命令操作后字段将无法使用HINCRBY命令操作 |
  | **HScan key cursor [MATCH pattern] [COUNT count]** |                    迭代哈希表中的键值对。                    |                                                     |
  
  Hash存储经常变动的信息，尤其是用户信息之类的！**Hash更适合于对象的存储，Sring更加适合字符串存储！**

实例

```shell
------------------------HSET--HMSET--HSETNX----------------
127.0.0.1:6379> HSET studentx name sakura # 将studentx哈希表作为一个对象，设置name为sakura
(integer) 1
127.0.0.1:6379> HSET studentx name gyc # 重复设置field进行覆盖，并返回0
(integer) 0
127.0.0.1:6379> HSET studentx age 20 # 设置studentx的age为20
(integer) 1
127.0.0.1:6379> HMSET studentx sex 1 tel 15623667886 # 设置sex为1，tel为15623667886
OK
127.0.0.1:6379> HSETNX studentx name gyc # HSETNX 设置已存在的field
(integer) 0 # 失败
127.0.0.1:6379> HSETNX studentx email 12345@qq.com
(integer) 1 # 成功

----------------------HEXISTS--------------------------------
127.0.0.1:6379> HEXISTS studentx name # name字段在studentx中是否存在
(integer) 1 # 存在
127.0.0.1:6379> HEXISTS studentx addr
(integer) 0 # 不存在

-------------------HGET--HMGET--HGETALL-----------
127.0.0.1:6379> HGET studentx name # 获取studentx中name字段的value
"gyc"
127.0.0.1:6379> HMGET studentx name age tel # 获取studentx中name、age、tel字段的value
1) "gyc"
2) "20"
3) "15623667886"
127.0.0.1:6379> HGETALL studentx # 获取studentx中所有的field及其value
 1) "name"
 2) "gyc"
 3) "age"
 4) "20"
 5) "sex"
 6) "1"
 7) "tel"
 8) "15623667886"
 9) "email"
10) "12345@qq.com"


--------------------HKEYS--HLEN--HVALS--------------
127.0.0.1:6379> HKEYS studentx # 查看studentx中所有的field
1) "name"
2) "age"
3) "sex"
4) "tel"
5) "email"
127.0.0.1:6379> HLEN studentx # 查看studentx中的字段数量
(integer) 5
127.0.0.1:6379> HVALS studentx # 查看studentx中所有的value
1) "gyc"
2) "20"
3) "1"
4) "15623667886"
5) "12345@qq.com"

-------------------------HDEL--------------------------
127.0.0.1:6379> HDEL studentx sex tel # 删除studentx 中的sex、tel字段
(integer) 2
127.0.0.1:6379> HKEYS studentx
1) "name"
2) "age"
3) "email"

-------------HINCRBY--HINCRBYFLOAT------------------------
127.0.0.1:6379> HINCRBY studentx age 1 # studentx的age字段数值+1
(integer) 21
127.0.0.1:6379> HINCRBY studentx name 1 # 非整数字型字段不可用
(error) ERR hash value is not an integer
127.0.0.1:6379> HINCRBYFLOAT studentx weight 0.6 # weight字段增加0.6
"90.8"
```

