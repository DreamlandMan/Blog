#### 测试性能

- redis-benchmark是一个压力测试工具，是官方自带的性能测试工具
- redis-benchmark命令，也可以使用`redis-benchmark --help`命令查看
  - 这个图比较老了，比如说-d，现在默认是3了
  - ![img](06.png)

- 测试100个线程，每个线程100000次请求。电脑差的不建议测这么多，会死机的。。。

  ```shell
  #它几乎会测试redis的所有命令
  [root@iZ0jldalqlhwtqori6z48lZ bin]# redis-benchmark -h localhost -p 6379 -c 100 -n 100000
  ====== PING_INLINE ====== #尝试连接，ping通之后才会开始压力测试
    100000 requests completed in 1.34 seconds
    100 parallel clients
    3 bytes payload
    keep alive: 1
    host configuration "save": 900 1 300 10 60 10000
    host configuration "appendonly": no
    multi-thread: no
  
  0.00% <= 0.1 milliseconds
  0.00% <= 0.2 milliseconds
  ...
  ====== PING_BULK ======
    100000 requests completed in 1.30 seconds #十万个请求花了1.3秒，非常快
    100 parallel clients #一共100个客户端线程
    3 bytes payload #每次写入3个字节的数据
    keep alive: 1 #只有一台服务器来处理这个请求
    host configuration "save": 900 1 300 10 60 10000 
    host configuration "appendonly": no
    multi-thread: no
  
  95.84% <= 1 milliseconds #第一毫秒内完成了95.84%
  99.49% <= 2 milliseconds #第二毫秒内完成了99.49%
  99.94% <= 3 milliseconds #第三毫秒内完成了99.94%
  100.00% <= 3 milliseconds #第三毫秒内完成了测试
  76923.08 requests per second #平均每秒处理了76923.08个请求
  
  ====== SET ====== #测试redis的SET命令
    100000 requests completed in 1.29 seconds
    100 parallel clients
    3 bytes payload
    keep alive: 1
    host configuration "save": 900 1 300 10 60 10000
    host configuration "appendonly": no
    multi-thread: no
  
  96.13% <= 1 milliseconds
  99.57% <= 2 milliseconds
  100.00% <= 2 milliseconds
  77700.08 requests per second
  
  ====== GET ====== #测试redis的SET命令
  ...
  ====== INCR ======
  ...
  ====== LPUSH ======
  ...
  ====== RPUSH ======
  ...
  ====== LPOP ======
  ...
  ====== RPOP ======
  ...
  ====== SADD ======
  ...
  ...
  ```

  

